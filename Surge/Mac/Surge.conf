# > https://github.com/whyFeelSad/ProxyRules
# > 2025-09-08

[General]
# > Core Settings
loglevel = notify
show-error-page-for-reject = true

# > Network Listening
http-listen = 127.0.0.1:6152
socks5-listen = 127.0.0.1:6153
external-controller-access = aaron@0.0.0.0:6170
http-api-tls = false
http-api = aaron@0.0.0.0:6171
http-api-web-dashboard = true

# > Connectivity tests
test-timeout = 3
proxy-test-url = http://cp.cloudflare.com/generate_204
internet-test-url = http://wifi.vivo.com.cn/generate_204

# > IPv6 Settings
ipv6 = true
ipv6-vif = auto

# > DNS Configuration
hijack-dns = *:53
dns-server = 119.29.29.29, 223.5.5.5, system
read-etc-hosts = true
encrypted-dns-server = https://dns.alidns.com/dns-query
encrypted-dns-follow-outbound-mode = true
doh-skip-cert-verification = true

# > Proxy Exceptions
skip-proxy = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16, 224.0.0.0/3, ::1/128, fc00::/7, fd00::/8, fe80::/10, ff00::/8, 2001::/32, 2001:db8::/32, 2002::/16, ::ffff:0:0:0:0/1, ::ffff:128:0:0:0/1, localhost, *.local
always-real-ip = *.lan, *.id.ui.direct, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, network-test.debian.org, detectportal.firefox.com, resolver1.opendns.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, stun.*, global.turn.twilio.com, global.stun.twilio.com, localhost.*.qq.com, localhost.*.weixin.qq.com, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn, music.163.com, *.music.163.com, *.126.net, musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, *.kuwo.cn, api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, *.y.qq.com, streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, *.xiami.com, *.music.migu.cn, music.migu.cn, proxy.golang.org, *.mcdn.bilivideo.cn, *.cmpassport.com, id6.me, open.e.189.cn, mdn.open.wo.cn, auth.wosms.cn, *.jegotrip.com.cn, *.icitymobile.mobi, *.pingan.com.cn, *.cmbchina.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, ntp?.*.com, time?.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn, PDC._msDCS.*.*, DC._msDCS.*.*, GC._msDCS.*.*
always-raw-tcp-hosts = www.google.com, 91.108.56.*, 91.108.4.*, 91.108.8.*, 91.108.16.*, 91.108.12.*, 149.154.16*, 149.154.17*, 91.108.20.*, 185.76.151.*, 91.105.192.*, 5.28.19*

# > GeoIP Settings
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
disable-geoip-db-auto-update = true

[Proxy]
# > Add your own node

[Proxy Group]
# > Sub-Store Subscribe (ALO = All In One)
Sub-Store = select, hidden=1, policy-path=https://sub.store/download/collection/AIO?target=Surge&includeUnsupportedProxy=true, update-interval=3600, no-alert=0, include-all-proxies=0

ðŸŒ Proxy = select, ðŸ‡­ðŸ‡° HKG, ðŸ‡¯ðŸ‡µ JPN, ðŸ‡ºðŸ‡¸ USA, ðŸ³ï¸â€ðŸŒˆ Oth
ðŸ¤– AI = select, ðŸ‡¯ðŸ‡µ JPN, ðŸ‡ºðŸ‡¸ USA
ðŸŽ Apple = select, DIRECT, ðŸ‡­ðŸ‡° HKG, ðŸ‡¯ðŸ‡µ JPN, ðŸ‡ºðŸ‡¸ USA, ðŸ³ï¸â€ðŸŒˆ Oth
ðŸ•Š Google = select, ðŸ‡­ðŸ‡° HKG, ðŸ‡¯ðŸ‡µ JPN, ðŸ‡ºðŸ‡¸ USA, ðŸ³ï¸â€ðŸŒˆ Oth
âœˆï¸ Telegram = select, ðŸ‡­ðŸ‡° HKG, ðŸ‡¯ðŸ‡µ JPN, ðŸ‡ºðŸ‡¸ USA, ðŸ³ï¸â€ðŸŒˆ Oth

ðŸ‡­ðŸ‡° HKG = smart,include-all-proxies=true, include-other-group=Sub-Store,update-interval=0, no-alert=0, hidden=0,policy-regex-filter=(ðŸ‡­ðŸ‡°)|(é¦™æ¸¯)|(Hong)|(HK)
ðŸ‡¯ðŸ‡µ JPN = smart,include-all-proxies=true, include-other-group=Sub-Store,update-interval=0, no-alert=0, hidden=0,policy-regex-filter=(ðŸ‡¯ðŸ‡µ)|(æ—¥æœ¬)|(Japan)|(JP)
ðŸ‡ºðŸ‡¸ USA = smart,include-all-proxies=true, include-other-group=Sub-Store,update-interval=0, no-alert=0, hidden=0,policy-regex-filter=(ðŸ‡ºðŸ‡¸)|(ç¾Žå›½)|(States)|(US)
ðŸ³ï¸â€ðŸŒˆ Oth = smart,include-all-proxies=true, include-other-group=Sub-Store,update-interval=0, no-alert=0, hidden=0,policy-regex-filter=^(?!.*?(ðŸ‡­ðŸ‡°|é¦™æ¸¯|Hong|HK|ðŸ‡¯ðŸ‡µ|æ—¥æœ¬|Japan|JP|ðŸ‡ºðŸ‡¸|ç¾Žå›½|States|US)).*$

[Rule]
# > Prevent application loop requests
IP-CIDR,0.0.0.0/32,REJECT,no-resolve

# > AD
RULE-SET,https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/refs/heads/main/Filters/AWAvenue-Ads-Rule-Surge-RULE-SET.list,REJECT,extended-matching
# > AI
RULE-SET,https://raw.githubusercontent.com/EAlyce/conf/refs/heads/main/Rule/OpenAI.list,AI
# > Apple
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,Apple
# > Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list,Google,no-resolve
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,Google
# > Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list,Telegram
# > Proxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list,Proxy
# > China
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMax/ChinaMax_All.list,DIRECT,extended-matching
# > Local Area Network
RULE-SET,LAN,DIRECT
# > Final
FINAL,Proxy,dns-failed

[MITM]
h2 = true
skip-server-cert-verify = true
